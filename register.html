<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Registro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        /* Ajustes ligeros para móviles sin cambiar el diseño */
        .card {
            border: 0;
        }

        @media (max-width: 575.98px) {
            body {
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
            }

            .card-body {
                padding: 1rem;
            }
        }

        @media (min-width: 576px) {
            .card-body {
                padding: 1.25rem;
            }
        }

        @media (min-width: 768px) {
            .card-body {
                padding: 1.75rem;
            }
        }
    </style>
</head>

<body class="bg-light d-flex min-vh-100 align-items-center">

    <main class="container py-4 py-md-5">
        <div class="row justify-content-center">
            <!-- Columnas responsivas manteniendo el mismo look -->
            <div class="col-12 col-sm-10 col-md-8 col-lg-5">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h3 class="text-center mb-3">Registro</h3>

                        <form id="registerForm" novalidate>
                            <div class="mb-3">
                                <label for="nombre" class="form-label">Nombre</label>
                                <input type="text" id="nombre" class="form-control" required autocomplete="name" />
                            </div>

                            <div class="mb-3">
                                <label for="correo" class="form-label">Correo</label>
                                <input type="email" id="correo" class="form-control" required autocomplete="email"
                                    inputmode="email" />
                            </div>

                            <div class="mb-3">
                                <label for="password" class="form-label">Contraseña</label>
                                <input type="password" id="password" class="form-control" required
                                    autocomplete="new-password" />
                            </div>

                            <button type="submit" class="btn btn-info w-100">Registrarse</button>
                        </form>

                        <p class="mt-3 text-center mb-0">
                            ¿Ya tienes cuenta? <a href="login.html">Inicia sesión</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Tu JS existente -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/main.js"></script>

    <!-- Script: guarda usuario y nombre para que aparezca en el nav -->
    <script>
        (function () {
            const form = document.getElementById('registerForm');
            if (!form) return;

            form.addEventListener('submit', function (e) {
                e.preventDefault();

                const nombre = document.getElementById('nombre').value.trim();
                const correo = document.getElementById('correo').value.trim().toLowerCase();
                const password = document.getElementById('password').value;

                if (!nombre || !correo || !password) {
                    alert('Completa todos los campos.');
                    return;
                }

                const usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');
                if (usuarios.some(u => String(u.correo).toLowerCase() === correo)) {
                    alert('Ya existe una cuenta con ese correo.');
                    return;
                }

                const nuevo = { nombre, correo, password };
                usuarios.push(nuevo);
                localStorage.setItem('usuarios', JSON.stringify(usuarios));

                // Sesión actual + llaves para que el nav muestre el nombre
                localStorage.setItem('usuarioActual', JSON.stringify(nuevo));
                localStorage.setItem('user_name', nombre);
                localStorage.setItem('user', JSON.stringify({ name: nombre, correo }));

                alert('Registro exitoso');
                window.location.href = 'index.html';
            });
        })();
    </script>
</body>

</html>